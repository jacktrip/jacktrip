<svg width="800" height="400" xmlns="http://www.w3.org/2000/svg">
  <!-- Main timeline -->
  <line x1="50" y1="200" x2="750" y2="200" stroke="black" stroke-width="2" fill="none"/>
  <polygon points="745,195 750,200 745,205" fill="black"/>
  <text x="760" y="205" font-family="sans-serif" font-size="12">Time</text>
  
  <!-- Time markers -->
  <line x1="100" y1="190" x2="100" y2="210" stroke="black" stroke-width="1"/>
  <text x="100" y="225" font-family="sans-serif" font-size="10" text-anchor="middle">t-3</text>
  
  <line x1="200" y1="190" x2="200" y2="210" stroke="black" stroke-width="1"/>
  <text x="200" y="225" font-family="sans-serif" font-size="10" text-anchor="middle">t-2</text>
  
  <line x1="300" y1="190" x2="300" y2="210" stroke="black" stroke-width="1"/>
  <text x="300" y="225" font-family="sans-serif" font-size="10" text-anchor="middle">t-1</text>
  
  <line x1="400" y1="190" x2="400" y2="210" stroke="black" stroke-width="2"/>
  <text x="400" y="225" font-family="sans-serif" font-size="10" text-anchor="middle">now</text>
  
  <line x1="500" y1="190" x2="500" y2="210" stroke="black" stroke-width="1"/>
  <text x="500" y="225" font-family="sans-serif" font-size="10" text-anchor="middle">t+1</text>
  
  <line x1="600" y1="190" x2="600" y2="210" stroke="black" stroke-width="1"/>
  <text x="600" y="225" font-family="sans-serif" font-size="10" text-anchor="middle">t+2</text>
  
  <!-- Tolerance window boundary lines -->
  <line x1="320" y1="120" x2="320" y2="280" stroke="black" stroke-width="1" stroke-dasharray="5,5"/>
  <line x1="480" y1="120" x2="480" y2="280" stroke="black" stroke-width="1" stroke-dasharray="5,5"/>
  
  <!-- Tolerance window label -->
  <text x="400" y="110" font-family="sans-serif" font-size="11" text-anchor="middle">Tolerance Window</text>
  <line x1="330" y1="115" x2="470" y2="115" stroke="black" stroke-width="1"/>
  <line x1="330" y1="110" x2="330" y2="120" stroke="black" stroke-width="1"/>
  <line x1="470" y1="110" x2="470" y2="120" stroke="black" stroke-width="1"/>
  
  <!-- Packet arrivals as simple circles -->
  <circle cx="150" cy="160" r="5" fill="none" stroke="black" stroke-width="2"/>
  <text x="150" y="145" font-family="sans-serif" font-size="10" text-anchor="middle">P1</text>
  
  <circle cx="340" cy="180" r="5" fill="none" stroke="black" stroke-width="2"/>
  <text x="340" y="165" font-family="sans-serif" font-size="10" text-anchor="middle">P2</text>
  
  <circle cx="380" cy="170" r="5" fill="none" stroke="black" stroke-width="2"/>
  <text x="380" y="155" font-family="sans-serif" font-size="10" text-anchor="middle">P3</text>
  
  <!-- Selected packet (filled circle) -->
  <circle cx="420" cy="175" r="5" fill="black" stroke="black" stroke-width="2"/>
  <text x="420" y="160" font-family="sans-serif" font-size="10" text-anchor="middle">P4</text>
  <text x="420" y="145" font-family="sans-serif" font-size="9" text-anchor="middle">SELECTED</text>
  
  <circle cx="550" cy="165" r="5" fill="none" stroke="black" stroke-width="2"/>
  <text x="550" y="150" font-family="sans-serif" font-size="10" text-anchor="middle">P5</text>
  
  <!-- Audio callback vertical line -->
  <line x1="400" y1="270" x2="400" y2="320" stroke="black" stroke-width="3"/>
  <text x="400" y="335" font-family="sans-serif" font-size="10" text-anchor="middle">Audio Callback</text>
  
  <!-- Previous and next callbacks (thinner) -->
  <line x1="250" y1="275" x2="250" y2="315" stroke="black" stroke-width="1"/>
  <line x1="550" y1="275" x2="550" y2="315" stroke="black" stroke-width="1"/>
  
  <!-- Skip indication for P1 -->
  <line x1="150" y1="140" x2="180" y2="120" stroke="black" stroke-width="1"/>
  <line x1="180" y1="120" x2="200" y2="130" stroke="black" stroke-width="1"/>
  <text x="175" y="115" font-family="sans-serif" font-size="8" text-anchor="middle">SKIP</text>
  
  <!-- Selection arrow pointing down to P4 -->
  <line x1="420" y1="135" x2="420" y2="165" stroke="black" stroke-width="2"/>
  <polygon points="415,160 420,170 425,160" fill="black"/>
  
  <!-- Legend box -->
  <rect x="50" y="30" width="180" height="70" fill="none" stroke="black" stroke-width="1"/>
  <text x="55" y="45" font-family="sans-serif" font-size="10" font-weight="bold">Legend:</text>
  
  <circle cx="65" cy="55" r="3" fill="none" stroke="black" stroke-width="1"/>
  <text x="75" y="58" font-family="sans-serif" font-size="9">Packet arrival</text>
  
  <circle cx="65" cy="68" r="3" fill="black" stroke="black" stroke-width="1"/>
  <text x="75" y="71" font-family="sans-serif" font-size="9">Selected packet</text>
  
  <line x1="140" y1="55" x2="155" y2="55" stroke="black" stroke-width="1" stroke-dasharray="3,3"/>
  <text x="160" y="58" font-family="sans-serif" font-size="9">Tolerance bounds</text>
  
  <!-- Algorithm steps -->
  <rect x="520" y="30" width="220" height="90" fill="none" stroke="black" stroke-width="1"/>
  <text x="525" y="45" font-family="sans-serif" font-size="10" font-weight="bold">Algorithm Steps:</text>
  <text x="525" y="58" font-family="sans-serif" font-size="9">1. Check age vs tolerance</text>
  <text x="525" y="71" font-family="sans-serif" font-size="9">2. Skip old packets</text>
  <text x="525" y="84" font-family="sans-serif" font-size="9">3. Select best candidate</text>
  <text x="525" y="97" font-family="sans-serif" font-size="9">4. Update sequence number</text>
  <text x="525" y="110" font-family="sans-serif" font-size="9">5. Output or predict</text>
</svg>

